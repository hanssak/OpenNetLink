@inject IJSRuntime JSRuntime

<div class="modal fade" id="ZipPreviewPopUp">
    <div class="modal-dialog modal-dialog">
        <div class="modal-content">
            <div class="modal-header modal-outline">
                <h5 class="modal-title pt-1 text-bold ">압축파일 미리보기 리스트</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <div class="card-body pt-0 pb-0">


                    <!--s table -->
                    <div class="col-md-12 p-0 mb-3">
                         
                        <div class="card-body table-responsive p-0 text-nowrap" style="height:331px; border:0px solid #ddd; overflow-x: hidden !important;background-color:#fff;">
                            <table class="table table-head-fixed table-bordered table-hover">
                                <thead>
                                    <tr>
                                        <th>파일명 </th>
                                        <th>파일경로 </th>
                                        <th>미리보기 </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (ZipFileItem item in zipList)
                                    {


                                    }


                                        <!--
        <tr>
            <td><i class="fas fa-file-archive icon_zip mr-2 "></i>1024.zip</td>

            <td>E:\UnZip_TEST\1024.zip</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-long-arrow-alt-right icon_point mr-2"></i><i class="fas fa-file-archive icon_zip mr-1"></i> Pinvoke.zip</td>

            <td>E:\UnZip_TEST\pinvoke.zip</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-long-arrow-alt-right icon_point mr-2"></i><i class="fas fa-file icon_file mr-1"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\Setting.settings</td>
            <td style="text-align:center;"><button type="button" class="btn-file"><i class="fas fa-eye mr-1"></i>미리보기</button></td>
        </tr>
        <tr>
            <td><i class="fas fa-long-arrow-alt-right icon_point mr-2"></i><i class="fas fa-file-archive icon_zip mr-1"></i>Pinvoke.zip</td>

            <td>E:\UnZip_TEST\pinvoke.zip</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-long-arrow-alt-right icon_point mr-2"></i><i class="fas fa-file icon_file mr-1"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\Setting.settings</td>
            <td style="text-align:center;"><button type="button" class="btn-file"><i class="fas fa-eye mr-1"></i>미리보기</button></td>
        </tr>
        <tr>
            <td><i class="fas fa-plus icon_point mr-2"></i><i class="fas fa-folder icon_folder mr-2"></i>Pinvoke</td>

            <td>E:\UnZip_TEST\pinvoke</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-plus icon_point mr-2"></i><i class="fas fa-folder icon_folder mr-2"></i>Pinvoke</td>

            <td>E:\UnZip_TEST\pinvoke</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td style="text-align:center;"><button type="button" class="btn-file"><i class="fas fa-eye mr-1"></i>미리보기</button></td>
        </tr>
        <tr>
            <td><i class="fas fa-plus icon_point mr-2"></i><i class="fas fa-folder icon_folder mr-2"></i>Pinvoke</td>

            <td>E:\UnZip_TEST\pinvoke</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-minus icon_point mr-2"></i><i class="fas fa-folder icon_folder mr-2"></i>Pinvoke</td>

            <td>E:\UnZip_TEST\pinvoke</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        <tr>
            <td><i class="fas fa-file icon_file mr-2"></i>Setting.pdf</td>

            <td>E:\UnZip_TEST\pinvoke.pdf</td>
            <td></td>
        </tr>
        -->


                                    </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button @onclick="closePopUp" type="button" style="cursor:pointer;" class="btn btn-md btn-black mr-0"><i class="fas fa-times"></i>닫기</button>
                </div>
            </div>
        </div>

    </div>
</div>

@code {
    List<ZipFileItem> zipList = new List<ZipFileItem>();
    public async Task openPopUp()
    {
        object[] param = { "ZipPreviewPopUp" };
        await JSRuntime.InvokeAsync<object>("openPopUp", param);
    }

    public void closePopUp()
    {
        object[] param = { "ZipPreviewPopUp" };
        JSRuntime.InvokeAsync<object>("closePopUp", param);
    }
    protected override void OnInitialized()
    {
        zipList.Add(new ZipFileItem(1, "1024.zip", "/"));
        zipList.Add(new ZipFileItem(1, "tmp1.zip", "/1024.zip"));
        zipList.Add(new ZipFileItem(1, "tmp2.zip", "/1024.zip"));
        zipList.Add(new ZipFileItem(2, "subdir1", "/1024.zip"));
        zipList.Add(new ZipFileItem(2, "subdir2", "/1024.zip"));
        zipList.Add(new ZipFileItem(1, "viwepdf.pdf", "/1024.zip"));
        base.OnInitialized();
    }

    public class ZipFileItem
    {
        public int fileType { get; set; }       //1:파일 2:폴더
        public string fileName { get; set; }    //파일명
        public string filePath { get; set; }    //경로
        private int pathStep = 0;

        public ZipFileItem(int type, string name, string path)
        {
            this.fileType = type;
            this.fileName = name;
            this.filePath = path;
            if (path == "/")
                pathStep = 1;
            else
            {
                string[] arrPath = path.Split("/");
                pathStep = arrPath.Length;
            }
        }
    }

}
